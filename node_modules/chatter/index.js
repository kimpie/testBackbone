var all_sockets = null;


exports.set_sockets = function (sockets) {
	all_sockets = sockets;
};


exports.connect_chatter = function (config) {

	config.socket.emit('entrance', {message: 'Welcome to the chat room!'});
	all_sockets.emit('entrance', {message: config.username + ' is online.'});
	all_sockets.emit('users', {name: config.username + ' '});
	//all_sockets.emit('current', {currentUser: socket});

	config.socket.on('disconnect', function () {
	all_sockets.emit('exit', {message: config.username + ' has disconnected.'});
	});

	config.socket.on('chat', function (data) {
		all_sockets.emit('chat', {message: data.message + " "});
	});

	config.socket.join('room');
	

};

exports.failure = function (socket) {
	socket.emit('error', {message: 'Please log in to the chatroom'});
};